<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thinkgem.jeesite.mother.admin.dao.CommodityDao">
    <sql id="commodity">
         id as "id",
        commodity_name as "commodityName",
        commodity_type as "commodityType",
        commodity_imager as "commodityImager",
        commodity_state as "commodityState",
        commodity_maker as "commodityMaker",
        commodity_price as "commodityPice",
        commodity_number as "commodityNumber",
        commodity_company as "commodityCompany",
        commodity_release as "commodityRelease",
        create_by as "createBy",
        create_name as "createName",
        create_date as "createDate",
        del_flag as "delFlag"
    </sql>
    <!--后台商品列表 -->
    <select id="findList" resultType="Commodity" parameterType="Commodity">
        SELECT
        <include refid="commodity"/>
        FROM
        mq_commodity
        WHERE
        1 = 1
        <if test="commodityType != '' and commodityType != null">
            and commodity_type = #{commodityType}
        </if>
        <if test="commodityState != '' and commodityState != null">
            and commodity_state = #{commodityState}
        </if>
        <if test="commodityRelease != '' and commodityRelease != null">
            and commodity_release = #{commodityRelease}
        </if>
        AND del_flag = '0'
    </select>
    <!--手机端商品列表 -->
    <select id="findPageCommodity" resultType="Commodity" parameterType="java.util.Map">
        SELECT
        <include refid="commodity"/>
        FROM
        mq_commodity
        WHERE
        1 = 1
        <if test="type != '' and type != null">
            and commodity_state = #{type}
        </if>
        <if test="commodityName != '' and commodityName != null">
           AND commodity_name LIKE '%${commodityName}%'
        </if>
        AND del_flag = '0'
        ORDER BY create_date DESC
        LIMIT  #{pageNo},#{pageSize}
    </select>

    <!--查看单条记录-->
    <select id="get" resultType="Commodity" parameterType="String">
        SELECT
        <include refid="commodity"/>
        FROM
        mq_commodity
        WHERE
        id=#{id}
    </select>
    <!--添加商品-->
    <insert id="insert" parameterType="Commodity">
      INSERT  INTO mq_commodity
      (
        id,
        commodity_name,
        commodity_type,
        commodity_imager,
        commodity_state,
        commodity_maker,
        commodity_price,
        commodity_number,
        commodity_company,
        commodity_release,
        create_by,
        create_name,
        create_date,
        del_flag
      )VALUES
      (
      #{id},
      #{commodityName},
      #{commodityType},
      #{commodityImager},
      #{commodityState},
      #{commodityMaker},
      #{commodityPice},
      #{commodityNumber},
      #{commodityCompany},
      #{commodityRelease},
      #{createBy.id},
      #{createBy.name},
      #{createDate},
      #{delFlag}
      )
    </insert>
    <!--修改商品-->
    <update id="update" parameterType="Commodity">
        UPDATE mq_commodity
        SET
        commodity_name = #{commodityName},
        commodity_type = #{commodityType},
        commodity_imager = #{commodityImager},
        commodity_state = #{commodityState},
        commodity_maker = #{commodityMaker},
        commodity_price = #{commodityPice},
        commodity_number = #{commodityNumber},
        commodity_company = #{commodityCompany},
        commodity_release = #{commodityRelease},
        update_by = #{createBy.id},
        update_name = #{createBy.name},
        update_date =  #{createDate},
        del_flag =  #{delFlag}
        WHERE
        id = #{id}
    </update>
    <!--手机端banner和精品推荐-->
    <select id="findAdvertising" resultType="Commodity" parameterType="java.util.Map">
        SELECT
        <include refid="commodity"/>
        FROM
        mq_commodity
        WHERE
        commodity_state = #{commodityState}
        ORDER BY create_date DESC
        LIMIT #{pageNo},#{pageSize}
    </select>
</mapper>